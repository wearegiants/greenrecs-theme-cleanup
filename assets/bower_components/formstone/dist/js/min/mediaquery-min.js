!function(e,t,i){"use strict";function n(t){t=t||{};for(var i in y)y.hasOwnProperty(i)&&(v[i]=t[i]?e.merge(t[i],v[i]):v[i]);v=e.extend(v,t),v.minWidth.sort(g.sortDesc),v.maxWidth.sort(g.sortAsc),v.minHeight.sort(g.sortDesc),v.maxHeight.sort(g.sortAsc);for(var n in y)if(y.hasOwnProperty(n)){x[n]={};for(var r in v[n])if(v[n].hasOwnProperty(r)){var a=window.matchMedia("("+y[n]+": "+(v[n][r]===1/0?1e5:v[n][r])+v.unit+")");a.addListener(o),x[n][v[n][r]]=a}}o()}function r(e,t,i){var n=l.matchMedia(t),r=m(n.media);w[r]||(w[r]={mq:n,active:!0,enter:{},leave:{}},w[r].mq.addListener(h));for(var a in i)i.hasOwnProperty(a)&&w[r].hasOwnProperty(a)&&(w[r][a][e]=i[a]);h(w[r].mq)}function a(e,t){if(e)if(t){var i=m(t);w[i]&&(w[i].enter[e]&&delete w[i].enter[e],w[i].leave[e]&&delete w[i].leave[e])}else for(var n in w)w.hasOwnProperty(n)&&(w[n].enter[e]&&delete w[n].enter[e],w[n].leave[e]&&delete w[n].leave[e])}function s(){p={unit:v.unit};for(var e in y)if(y.hasOwnProperty(e))for(var t in x[e])if(x[e].hasOwnProperty(t)&&x[e][t].matches){var i="Infinity"===t?1/0:parseInt(t,10);e.indexOf("max")>-1?(!p[e]||i<p[e])&&(p[e]=i):(!p[e]||i>p[e])&&(p[e]=i)}}function o(){s(),u.trigger(f.mqChange,[p])}function h(e){var t=m(e.media),i=w[t],n=e.matches?f.enter:f.leave;if(i&&i.active||!i.active&&e.matches){for(var r in i[n])i[n].hasOwnProperty(r)&&i[n][r].apply(i.mq);i.active=!0}}function m(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function c(){return p}var d=t.Plugin("mediaquery",{utilities:{_initialize:n,state:c,bind:r,unbind:a},events:{mqChange:"mqchange"}}),v={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},f=e.extend(d.events,{enter:"enter",leave:"leave"}),u=t.$window,l=u[0],g=d.functions,p=null,w=[],x={},y={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone);