!function(e,t,i){"use strict";function n(e){_.iterate.call(X,c)}function a(){X=e(M.base)}function s(i){var n;i.maxWidth=i.maxWidth===1/0?"100000px":i.maxWidth,i.mq="(min-width:"+i.minWidth+") and (max-width:"+i.maxWidth+")",i.mqGuid=y.base+"__"+j++,t.support.transform||(i.useMargin=!0);var s="",o="";if(i.controls&&(s+='<div class="'+y.controls+'">',s+='<button type="button" class="'+[y.control,y.control_previous].join(" ")+'">'+i.labels.previous+"</button>",s+='<button type="button" class="'+[y.control,y.control_next].join(" ")+'">'+i.labels.next+"</button>",s+="</div>"),i.pagination&&(o+='<div class="'+y.pagination+'">',o+="</div>"),this.addClass([y.base,i.customClass].join(" ")).wrapInner('<div class="'+y.container+'"><div class="'+y.canister+'"></div></div>').append(s).wrapInner('<div class="'+y.viewport+'"></div>').append(o),i.$viewport=this.find(M.viewport).eq(0),i.$container=this.find(M.container).eq(0),i.$canister=this.find(M.canister).eq(0),i.$controls=this.find(M.controls).eq(0),i.$pagination=this.find(M.pagination).eq(0),i.$items=i.$canister.children().addClass(y.item),i.$controlItems=i.$controls.find(M.control),i.$paginationItems=i.$pagination.find(M.page),i.$images=i.$canister.find("img"),i.index=0,i.enabled=!1,i.leftPosition=0,i.totalImages=i.$images.length,i.autoTimer=null,"object"===e.type(i.show)){var c=i.show,d=[];for(n in c)c.hasOwnProperty(n)&&d.push(n);d.sort(_.sortAsc),i.show={};for(n in d)d.hasOwnProperty(n)&&(i.show[d[n]]={width:parseInt(d[n]),count:c[d[n]]})}if(e.mediaquery("bind",i.mqGuid,i.mq,{enter:function(){l.call(i.$el,i)},leave:function(){r.call(i.$el,i)}}),i.totalImages>0)for(i.loadedImages=0,n=0;n<i.totalImages;n++){var u=i.$images.eq(n);u.one(L.load,i,g),(u[0].complete||u[0].height)&&u.trigger(L.load)}i.autoAdvance&&(i.autoTimer=_.startTimer(i.autoTimer,i.autoTime,function(){f(i)},!0)),a()}function o(t){_.clearTimer(t.autoTimer),r.call(this,t),e.mediaquery("unbind",t.mqGuid,t.mq),t.$items.removeClass([y.item,y.visible].join(" ")).unwrap().unwrap(),t.pagination&&t.$pagination.remove(),t.controls&&t.$controls.remove(),this.removeClass([y.base,y.enabled,y.animated,t.customClass].join(" ")),a()}function r(e){e.enabled&&(_.clearTimer(e.autoTimer),e.enabled=!1,this.removeClass([y.enabled,y.animated].join(" ")).off(L.namespace),e.$canister.touch("destroy").off(L.namespace).attr("style","").css(k,"none"),e.$items.css({width:"",height:""}),e.$controls.removeClass(y.visible),e.$pagination.removeClass(y.visible).html(""),e.useMargin?e.$canister.css({marginLeft:""}):e.$canister.css(H,""),e.index=0)}function l(e){e.enabled||(e.enabled=!0,this.addClass(y.enabled).on(L.clickTouchStart,M.control,e,h).on(L.clickTouchStart,M.page,e,v),e.$canister.touch({axis:"x",pan:!0,swipe:!0}).on(L.panStart,e,w).on(L.pan,e,P).on(L.panEnd,e,I).on(L.swipe,e,T).css(k,""),c.call(this,e))}function c(e){if(e.enabled){var t,i,n,a,s;if(e.count=e.$items.length,e.count<1)return;for(this.removeClass(y.animated),e.containerWidth=e.$container.outerWidth(!1),e.visible=x(e),e.perPage=e.paged?1:e.visible,e.itemMargin=parseInt(e.$items.eq(0).css("marginRight"))+parseInt(e.$items.eq(0).css("marginLeft")),e.itemWidth=(e.containerWidth-e.itemMargin*(e.visible-1))/e.visible,e.itemHeight=0,e.pageWidth=e.paged?e.itemWidth:e.containerWidth,e.pageCount=Math.ceil(e.count/e.perPage),e.$canister.css({width:(e.pageWidth+e.itemMargin)*e.pageCount}),e.$items.css({width:e.itemWidth,height:""}).removeClass(y.visible),e.pages=[],t=0,i=0;t<e.count;t+=e.perPage)n=e.$items.slice(t,t+e.perPage),n.length<e.perPage&&(n=0===t?e.$items:e.$items.slice(e.$items.length-e.perPage)),a=n.eq(0),s=a.outerHeight(),e.pages.push({left:a.position().left,height:s,$items:n}),s>e.itemHeight&&(e.itemHeight=s),i++;e.paged&&(e.pageCount-=e.count%e.visible),e.maxMove=-e.pages[e.pageCount-1].left,e.autoHeight&&e.$items.css({height:e.itemHeight});var o="";for(t=0;t<e.pageCount;t++)o+='<button type="button" class="'+y.page+'">'+(t+1)+"</button>";e.$pagination.html(o),e.pageCount<=1?(e.$controls.removeClass(y.visible),e.$pagination.removeClass(y.visible)):(e.$controls.addClass(y.visible),e.$pagination.addClass(y.visible)),e.$paginationItems=e.$el.find(M.page),b(e,e.index,!1),setTimeout(function(){e.$el.addClass(y.animated)},5)}}function d(e){e.enabled&&(e.$items=e.$canister.children().addClass(y.item),c.call(this,e))}function u(e,t){e.enabled&&(_.clearTimer(e.autoTimer),b(e,t-1))}function m(e){var t=e.index-1;e.infinite&&0>t&&(t=e.pageCount),b(e,t)}function p(e){var t=e.index+1;e.infinite&&t>=e.pageCount&&(t=0),b(e,t)}function g(e){var t=e.data;t.loadedImages++,t.loadedImages===t.totalImages&&c.call(t.$el,t)}function f(e){var t=e.index+1;t>=e.pageCount&&(t=0),b(e,t)}function h(t){_.killEvent(t);var i=t.data,n=i.index+(e(t.currentTarget).hasClass(y.control_next)?1:-1);_.clearTimer(i.autoTimer),b(i,n)}function v(t){_.killEvent(t);var i=t.data,n=i.$paginationItems.index(e(t.currentTarget));_.clearTimer(i.autoTimer),b(i,n)}function b(e,t,i){0>t&&(t=e.infinite?e.pageCount-1:0),t>=e.pageCount&&(t=e.infinite?0:e.pageCount-1),e.pages[t]&&(e.leftPosition=-e.pages[t].left),e.leftPosition<e.maxMove&&(e.leftPosition=e.maxMove),(e.leftPosition>0||isNaN(e.leftPosition))&&(e.leftPosition=0),e.useMargin?e.$canister.css({marginLeft:e.leftPosition}):i===!1?(e.$canister.css(k,"none").css(H,"translateX("+e.leftPosition+"px)"),setTimeout(function(){e.$canister.css(k,"")},5)):e.$canister.css(H,"translateX("+e.leftPosition+"px)"),e.$items.removeClass(y.visible),e.pages[t].$items.addClass(y.visible),i!==!1&&t!==e.index&&(e.infinite||t>-1&&t<e.pageCount)&&e.$el.trigger(L.update,[t]),e.index=t,C(e)}function C(e){e.$paginationItems.removeClass(y.active).eq(e.index).addClass(y.active),e.infinite?e.$controlItems.addClass(y.visible):e.pageCount<1?e.$controlItems.removeClass(y.visible):(e.$controlItems.addClass(y.visible),e.index<=0?e.$controlItems.filter(M.control_previous).removeClass(y.visible):(e.index>=e.pageCount||e.leftPosition===e.maxMove)&&e.$controlItems.filter(M.control_next).removeClass(y.visible))}function x(i){if("object"===e.type(i.show)){for(var n in i.show)if(i.show.hasOwnProperty(n)&&t.windowWidth>=i.show[n].width)return i.fill&&i.count<i.show[n].count?i.count:i.show[n].count;return 1}return i.fill&&i.count<i.show?i.count:i.show}function w(e){var t=e.data;if(t.useMargin)t.leftPosition=parseInt(t.$canister.css("marginLeft"));else{var i=t.$canister.css(H).split(",");t.leftPosition=parseInt(i[4])}t.$canister.css(k,"none"),P(e),t.isTouching=!0}function P(e){var t=e.data;t.touchLeft=t.leftPosition+e.deltaX,t.touchLeft>0&&(t.touchLeft=0),t.touchLeft<t.maxMove&&(t.touchLeft=t.maxMove),t.useMargin?t.$canister.css({marginLeft:t.touchLeft}):t.$canister.css(H,"translateX("+t.touchLeft+"px)")}function I(e){var t=e.data,i=e.deltaX>-50&&e.deltaX<50?t.index:t.index+("left"===e.directionX?1:-1);q(t,i)}function T(e){var t=e.data,i=t.index+("left"===e.directionX?1:-1);q(t,i)}function q(e,t){e.$canister.css(k,""),b(e,t),e.isTouching=!1}var W=t.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,controls:!0,customClass:"",fill:!1,infinite:!1,labels:{next:"Next",previous:"Previous"},maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,show:1,sized:!0,useMargin:!1},classes:["viewport","container","canister","item","controls","control","pagination","page","animated","enabled","visible","active","control_previous","control_next"],events:{update:"update",panStart:"panstart",pan:"pan",panEnd:"panend",swipe:"swipe"},methods:{_construct:s,_destruct:o,_resize:n,disable:r,enable:l,jump:u,previous:m,next:p,reset:d,resize:c}}),M=W.classes,y=M.raw,L=W.events,_=W.functions,j=0,X=[],H=t.transform,k=t.transition}(jQuery,Formstone);