!function($,e,t){"use strict";function i(e){e=e||{};for(var t in x)x.hasOwnProperty(t)&&(d[t]=e[t]?$.merge(e[t],d[t]):d[t]);d=$.extend(d,e),d.minWidth.sort(l.sortDesc),d.maxWidth.sort(l.sortAsc),d.minHeight.sort(l.sortDesc),d.maxHeight.sort(l.sortAsc);for(var i in x)if(x.hasOwnProperty(i)){w[i]={};for(var n in d[i])if(d[i].hasOwnProperty(n)){var r=window.matchMedia("("+x[i]+": "+(1/0===d[i][n]?1e5:d[i][n])+d.unit+")");r.addListener(s),w[i][d[i][n]]=r}}s()}function n(e,t,i){var n=u.matchMedia(t),r=h(n.media);p[r]||(p[r]={mq:n,active:!0,enter:{},leave:{}},p[r].mq.addListener(o));for(var a in i)i.hasOwnProperty(a)&&p[r].hasOwnProperty(a)&&(p[r][a][e]=i[a]);o(p[r].mq)}function r(e,t){if(e)if(t){var i=h(t);p[i]&&(p[i].enter[e]&&delete p[i].enter[e],p[i].leave[e]&&delete p[i].leave[e])}else for(var n in p)p.hasOwnProperty(n)&&(p[n].enter[e]&&delete p[n].enter[e],p[n].leave[e]&&delete p[n].leave[e])}function a(){g={unit:d.unit};for(var e in x)if(x.hasOwnProperty(e))for(var t in w[e])if(w[e].hasOwnProperty(t)&&w[e][t].matches){var i="Infinity"===t?1/0:parseInt(t,10);e.indexOf("max")>-1?(!g[e]||i<g[e])&&(g[e]=i):(!g[e]||i>g[e])&&(g[e]=i)}}function s(){a(),f.trigger(v.mqChange,[g])}function o(e){var t=h(e.media),i=p[t],n=e.matches?v.enter:v.leave;if(i&&i.active||!i.active&&e.matches){for(var r in i[n])i[n].hasOwnProperty(r)&&i[n][r].apply(i.mq);i.active=!0}}function h(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function m(){return g}var c=e.Plugin("mediaquery",{utilities:{_initialize:i,state:m,bind:n,unbind:r},events:{mqChange:"mqchange"}}),d={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},v=$.extend(c.events,{enter:"enter",leave:"leave"}),f=e.$window,u=f[0],l=c.functions,g=null,p=[],w={},x={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone);