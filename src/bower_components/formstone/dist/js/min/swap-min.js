!function(a,e,t){"use strict";function s(e){e.enabled=!1,e.active=!1,e.classes=a.extend(!0,{},u,e.classes),e.target=this.data(v+"-target"),e.$target=a(e.target).addClass(e.classes.raw.target),e.linked=this.data(v+"-linked"),e.mq="(max-width:"+(e.maxWidth===1/0?"100000px":e.maxWidth)+")",e.mqGuid=e.classes.raw.base+"__"+g++;var t=this.data(v+"-group");e.group=t?"[data-"+v+'-group="'+t+'"]':!1,!e.collapse&&e.group&&a(e.group).eq(0).attr("data-"+v+"-active","true"),e.onEnable=this.data(v+"-active"),e.$swaps=a().add(this).add(e.$target),this.touch({tap:!0}).on(p.tap,e,r),a.mediaquery("bind",e.mqGuid,e.mq,{enter:function(){c.call(e.$el,e)},leave:function(){d.call(e.$el,e)}})}function i(e){a.mediaquery("unbind",e.mqGuid,e.mq),e.$swaps.removeClass([e.classes.raw.enabled,e.classes.raw.active].join(" ")).off(p.namespace),this.touch("destroy")}function l(e,t){if(e.enabled&&!e.active){a(e.group).not(e.$el)[o.namespace]("deactivate");var s=e.group?a(e.group).index(e.$el):null;e.$swaps.addClass(e.classes.raw.active),t||a(e.linked).not(e.$el).swap("activate",!0),this.trigger(p.activate,[s]),e.active=!0}}function n(e,t){e.enabled&&e.active&&(e.$swaps.removeClass(e.classes.raw.active),t||a(e.linked).not(e.$el).swap("deactivate",!0),this.trigger(p.deactivate),e.active=!1)}function c(e,t){e.enabled||(e.$swaps.addClass(e.classes.raw.enabled),t||a(e.linked).not(e.$el).swap("enable"),e.enabled=!0,this.trigger(p.enable),e.onEnable?(e.active=!0,e.$swaps.addClass(e.classes.raw.active)):(e.active=!0,n.call(this,e)))}function d(e,t){e.enabled&&(e.$swaps.removeClass([e.classes.raw.enabled,e.classes.raw.active].join(" ")),t||a(e.linked).not(e.$el).swap("disable"),this.trigger(p.disable),e.enabled=!1)}function r(a){b.killEvent(a);var e=a.data;e.active&&e.collapse?n.call(e.$el,e):l.call(e.$el,e)}var o=e.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{tap:"tap",activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:s,_destruct:i,activate:l,deactivate:n,enable:c,disable:d}}),v=o.namespace,u=o.classes,p=o.events,b=o.functions,g=0}(jQuery,Formstone);